<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Project Telescope</title>
  <style>
    p.graph{
     border : 1px solid #000000;
    }
    .h1#graphHeader{
      font-family: "Times New Roman", Times, serif;
    }

  </style>
  <script src="https://cdn.plot.ly/plotly-2.8.3.min.js"></script>
  <script src="https://gist.github.com/matt-west/6500993"></script>
  <script defer>
    
  function displayData(x_var, y_var) {
    x_list = x_var.dataSets[0].series["0:0:0:0"].observations
    console.log(x_list)
    x_vals = []
    for (let ind = 0; ind < 30; ind++){
      element = x_list[ind]
      if (element != undefined){
        element = element[0]
        x_vals.push(element)
      }
      else{
        break
      }
      
    }
    console.log(x_vals)
    y_list = y_var.dataSets[0].series["0:0:0:0"].observations
    y_vals = []
    for (let ind = 0; ind < 30; ind++){
      element = y_list[ind]
      
      if (element != undefined){
        element = element[0]
        y_vals.push(element)
      }
      else{
        break
      } 
    }
    console.log(y_vals)
  var layout = {
  autosize: true,
  width: 1200,
  height: 800,
  margin: {
    l: 50,
    r: 50,
    b: 100,
    t: 100,
    pad: 4
  },
  paper_bgcolor: '#FFFFFF',
  plot_bgcolor: '#FFFFFF',
  xaxis: {
    title: {
      text: 'Time',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#7f7f7f'
      }
    },
  },
  yaxis: {
    title: {
      text: 'Production of coal in selected country',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#7f7f7f'
      }
    }
  },
  };


  
  var data = [
    {
      x: x_vals,
      y: y_vals,
      type: 'line'
    }
  ];
  

    Plotly.newPlot('myDiv', data, layout)
  }
  async function load(){
    x_var = await fetch("/json/independent")
      .then(response => response.json())
    y_var = await fetch("/json/dependent")
      .then(response => response.json())
    console.log(x_var, y_var)
    displayData(x_var, y_var)
    
  }
  window.onload = load
  </script>
</head>  
<body> 
  <h1 id="graphHeader">Here's your data :)</h1>
  <label for = "myDiv">Graph :</label> 
  <div id="new">
  <p id="myDiv" class="graph"></p>
  </div>

  <h1>Brief</h1>
  <p1>
  <br>A project to optimize statistical analysis for Ingraham Highschool</br> 
  <h1> Authors  </h1> 
  Thea Waldron 
  <h1>Contributors  </h1>
  Thomas F.
  <h1> Help and Advice </h1>
  N. K. , 
  N. W. 
  </p1>
  <div></div>
  <div id = "tst"></div>
</body>
</html>